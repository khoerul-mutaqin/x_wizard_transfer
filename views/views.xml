<odoo>
  <data>
    <!-- actions opening views on models -->
    <record model="ir.actions.act_window" id="x_wizard_transfer_act">
      <field name="name">x_wizard_transfer window</field>
      <field name="res_model">x_wizard_transfer</field>
      <field name="view_mode">list,form</field>
    </record>

    <!-- server action to the one above -->
    <record model="ir.actions.server" id="action_validate_picking_wizard">
        <field name="name">[FAL] : Button Validate Wizard Transfer</field>
        <field name="model_id" ref="model_x_wizard_transfer" />
        <field name="state">code</field>
        <field name="code">
validations_ok = True
for rec in records:
    if not rec.x_stock_picking:
        continue # Lewati jika field kosong
    rec.x_stock_picking.button_validate()
action = {
    "type": "ir.actions.act_window_close"
}
# created - khoerul  falinwa for Validate wizard transfer (stock picking)
        </field>
    </record>

    <!-- server action to the one above -->
    <record model="ir.actions.server" id="action_open_picking_wizard">
      <field name="name">[FAL] : Open Validate Wizard Transfer</field>
      <field name="model_id" ref="stock.model_stock_picking"/>
      <field name="state">code</field>
      <field name="code">
new_wizard = env['x_wizard_transfer'].create({
    'x_name': 'Wizard Stock Picking',
    'x_stock_picking': record.id,
    'x_schedule_date': record.scheduled_date,
})
action = {
    'name': 'Confirmation',
    'type': 'ir.actions.act_window',
    'res_model': 'x_wizard_transfer', 
    'view_mode': 'form',
    'res_id': new_wizard.id, 
    'target': 'new',
    #  'context': {'default_x_name': 'lazada', 'search_default_filter_lazada_channels': 1},
}         
# created - khoerul  falinwa for open wizard transfer (stock picking)
      </field>
    </record>

    <!-- explicit list view definition -->
    <record model="ir.ui.view" id="view_picking_form_inherit">
      <field name="name">stock.account.view.picking.form.inherit</field>
      <field name="model">stock.picking</field>
      <field name="inherit_id" ref="stock.view_picking_form"></field>
      <field name="arch" type="xml">
        <xpath expr="//button[@name='button_validate']" position="replace">
          <button string="Validate" name="%(x_wizard_transfer.action_open_picking_wizard)d" type="action" invisible="state in ('done')" />
        </xpath>
        <!-- <xpath expr="//button[@name='button_validate'][2]" position="replace"> -->
          <!-- <button string="Validate" name="%(x_wizard_transfer.action_open_picking_wizard)d" type="action" invisible="state in ('done')" /> -->
        <!-- </xpath> -->
      </field>
    </record>

    <!-- view model x_wizard_transfer -->
    <record model="ir.ui.view" id="view_fal_o_ch_tree_x_wizard_transfer">
      <field name="name">x_wizard_transfer.list</field>
      <field name="model">x_wizard_transfer</field>
      <field name="arch" type="xml">
        <list>
          <field name="x_name" />
          <field name="x_schedule_date" />
          <field name="x_stock_picking" />
        </list>
      </field>
    </record>

    <record id="view_fal_o_ch_form_x_wizard_transfer" model="ir.ui.view">
      <field name="name">x_wizard_transfer.form</field>
      <field name="model">x_wizard_transfer</field>
      <field name="arch" type="xml">
        <form>
          <span>
              Apakah anda yakin akan Validate transfer ini dengan detail tanggal: <field name="x_schedule_date" readonly="1" options="{'format': 'yyyy-mm-dd'}" />?
          </span>
          <footer>
            <button string="Ok" name="%(x_wizard_transfer.action_validate_picking_wizard)d" type="action" class="btn btn-primary" />
            <button string="Cancel" class="btn-default" special="cancel" />
          </footer>
        </form>
      </field>
    </record>    

  </data>
</odoo>
